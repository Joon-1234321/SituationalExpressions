<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ìˆ˜ë™íƒœ â†’ ëŠ¥ë™íƒœë¡œ ë°”ê¾¸ê¸°</title>
<style>
  :root{
    --bg:#0b1220;
    --panel:#0f1b36cc;
    --text:#e5e7eb;
    --accent:#38bdf8;
    --accent2:#22c55e;
    --wrong:#ef4444;
  }
  *{box-sizing:border-box;}
  html,body{
    margin:0;
    height:100%;
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
    background:radial-gradient(1200px 700px at 50% -10%, #1b2a55 0%, var(--bg) 60%);
    color:var(--text);
    font-size:1.3rem;
  }
  .wrap{
    max-width:900px;
    margin:0 auto;
    padding:22px;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
  }
  header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    margin-bottom:16px;
    flex-wrap:wrap;
    font-size:1.1rem;
  }
  .title{
    font-size:1.6rem;
    font-weight:700;
  }

  main{
    background:var(--panel);
    border-radius:20px;
    padding:26px 22px;
    box-shadow:0 18px 40px #0007;
  }

  .ko{
    background:#0f172a;
    border-radius:12px;
    padding:12px 16px;
    margin-bottom:14px;
    font-size:1.3rem;
    font-weight:600;
  }

  .passive{
    font-size:1.5rem;
    font-weight:700;
    margin-bottom:6px;
  }

  .instruction{
    font-size:1.1rem;
    opacity:0.9;
    margin-bottom:18px;
  }

  #answerInput{
    width:100%;
    padding:14px 16px;
    border-radius:10px;
    border:1px solid #475569;
    background:#020617;
    color:var(--text);
    font-size:1.35rem;
  }
  #answerInput:focus{
    outline:none;
    border-color:var(--accent);
    box-shadow:0 0 0 1px rgba(56,189,248,0.7);
  }

  .buttons{
    margin-top:14px;
    display:flex;
    gap:12px;
    flex-wrap:wrap;
  }
  button{
    border:none;
    border-radius:999px;
    padding:10px 20px;
    font-size:1.05rem;
    font-weight:600;
    cursor:pointer;
  }
  #checkBtn{
    background:linear-gradient(135deg,var(--accent),#4f46e5);
    color:white;
  }
  #showAnswerBtn{
    background:#1e293b;
    color:#e5e7eb;
  }
  #nextBtn{
    background:linear-gradient(135deg,var(--accent2),#16a34a);
    color:white;
  }
  #nextBtn:disabled{
    opacity:0.4;
    cursor:default;
  }

  .feedback{
    margin-top:10px;
    min-height:1.6em;
    font-size:1.3rem;
    font-weight:700;
  }
  .feedback.ok{color:var(--accent2);}
  .feedback.no{color:var(--wrong);}

  .done{
    text-align:center;
    padding:30px 10px;
    font-size:1.4rem;
  }
  .done-title{
    font-size:2rem;
    font-weight:700;
    margin-bottom:12px;
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="title">ìˆ˜ë™íƒœ ë¬¸ì¥ì„ ëŠ¥ë™íƒœë¡œ ë°”ê¿” ë³´ì„¸ìš”</div>
    <div><span id="currentNum">1</span> / <span id="totalNum">0</span> ë¬¸ì œ</div>
  </header>

  <main>
    <div id="quizArea">
      <div class="ko" id="koText"></div>
      <div class="passive" id="passiveText"></div>
      <div class="instruction">
        ìœ„ ìˆ˜ë™íƒœ ë¬¸ì¥ì„ <strong>ëŠ¥ë™íƒœ(Active Voice)</strong>ë¡œ ë°”ê¿” í•œ ë¬¸ì¥ìœ¼ë¡œ ì¨ ë³´ì„¸ìš”.
      </div>

      <input id="answerInput" placeholder="ì˜ˆ: The students do the homework every day.">
      <div class="buttons">
        <button id="checkBtn">ì •ë‹µ í™•ì¸</button>
        <button id="showAnswerBtn">ì •ë‹µ ë³´ê¸°</button>
        <button id="nextBtn" disabled>ë‹¤ìŒ ë¬¸ì œ â–¶</button>
      </div>
      <div class="feedback" id="feedback"></div>
    </div>

    <div id="doneArea" style="display:none;">
      <div class="done">
        <div class="done-title">ìˆ˜ê³ í–ˆì–´ìš”! ğŸ‰</div>
        ëª¨ë“  ìˆ˜ë™íƒœ ë¬¸ì¥ì„ ëŠ¥ë™íƒœë¡œ ë°”ê¿” ë³´ì•˜ìŠµë‹ˆë‹¤.
      </div>
    </div>
  </main>
</div>

<script>
const questions = [
  // í˜„ì¬ ìˆ˜ë™íƒœ (ì£¼ì–´ ëª…ì‹œ)
  {
    ko:"í•™ìƒë“¤ì€ ìˆ™ì œë¥¼ ë§¤ì¼ í•œë‹¤.",
    passive:"The homework is done every day by the students.",
    active:"The students do the homework every day."
  },
  {
    ko:"ì„ ìƒë‹˜ì€ ì•„ì¹¨ì— êµì‹¤ì„ ì²­ì†Œí•œë‹¤.",
    passive:"The classroom is cleaned in the morning by the teacher.",
    active:"The teacher cleans the classroom in the morning."
  },
  {
    ko:"ìš°ë¦¬ ë°˜ í•™ìƒë“¤ì€ ë§ì€ ì±…ì„ ì½ëŠ”ë‹¤.",
    passive:"Many books are read in our class by the students.",
    active:"The students read many books in our class."
  },
  {
    ko:"ìš°ë¦¬ ì—„ë§ˆëŠ” ì¿ í‚¤ë¥¼ ë§Œë“ ë‹¤.",
    passive:"The cookies are made by my mom.",
    active:"My mom makes the cookies."
  },
  {
    ko:"ë§¤ë‹ˆì €ëŠ” ë¬¸ì„ ì˜¤ì „ 8ì‹œì— ì—°ë‹¤.",
    passive:"The door is opened at 8 a.m. by the manager.",
    active:"The manager opens the door at 8 a.m."
  },

  // ê³¼ê±° ìˆ˜ë™íƒœ (ì£¼ì–´ ëª…ì‹œ)
  {
    ko:"í†°ì€ ì–´ì œ ì°½ë¬¸ì„ ê¹¨ëœ¨ë ¸ë‹¤.",
    passive:"The window was broken yesterday by Tom.",
    active:"Tom broke the window yesterday."
  },
  {
    ko:"ì‚¬ë¬´ì‹¤ ì§ì›ë“¤ì€ ì§€ë‚œì£¼ì— í¸ì§€ë“¤ì„ ë³´ëƒˆë‹¤.",
    passive:"The letters were sent last week by the office staff.",
    active:"The office staff sent the letters last week."
  },
  {
    ko:"ìš°ë¦¬ íŒ€ì€ ì²´ìœ¡ê´€ì—ì„œ ê·¸ ê²½ê¸°ë¥¼ í–ˆë‹¤.",
    passive:"The game was played in the gym by our team.",
    active:"Our team played the game in the gym."
  },
  {
    ko:"ë¯¸ë‚˜ëŠ” ê·¸ ê·¸ë¦¼ì„ ê·¸ë ¸ë‹¤.",
    passive:"The picture was painted by Mina.",
    active:"Mina painted the picture."
  },
  {
    ko:"ì§ì›ë“¤ì€ ì •ë¬¸ì—ì„œ ê°€ë°©ë“¤ì„ ê²€ì‚¬í–ˆë‹¤.",
    passive:"The bags were checked at the gate by the staff.",
    active:"The staff checked the bags at the gate."
  },
  {
    ko:"í•™ìƒë“¤ì€ ì‹œí—˜ì„ ì¼ì° ëëƒˆë‹¤.",
    passive:"The test was finished early by the students.",
    active:"The students finished the test early."
  },
  {
    ko:"í•™ìƒë“¤ì€ ì¶•ì œì—ì„œ ê·¸ ë…¸ë˜ë“¤ì„ ë¶ˆë €ë‹¤.",
    passive:"The songs were sung at the festival by the students.",
    active:"The students sang the songs at the festival."
  },
  {
    ko:"ìš°ë¦¬ ê°€ì¡±ì€ ì§‘ì—ì„œ ê·¸ ì˜í™”ë¥¼ ë³´ì•˜ë‹¤.",
    passive:"The movie was watched at home by my family.",
    active:"My family watched the movie at home."
  },
  {
    ko:"ê³¼í•™ ë™ì•„ë¦¬ëŠ” ê·¸ ë°©ì„ ì‚¬ìš©í–ˆë‹¤.",
    passive:"The room was used by the science club.",
    active:"The science club used the room."
  },
  {
    ko:"ì•„ì´ë“¤ì€ ê³µì› ê·¼ì²˜ì—ì„œ ê°•ì•„ì§€ë“¤ì„ ë°œê²¬í–ˆë‹¤.",
    passive:"The puppies were found near the park by the children.",
    active:"The children found the puppies near the park."
  },

  // ì¡°ë™ì‚¬ + ìˆ˜ë™íƒœ (ì£¼ì–´ ëª…ì‹œ)
  {
    ko:"ìš°ë¦¬ íŒ€ì€ ê·¸ ë¬¸ì œë¥¼ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.",
    passive:"The problem can be solved easily by our team.",
    active:"Our team can solve the problem easily."
  },
  {
    ko:"í•™ìƒë“¤ì€ ì ì‹¬ ì‹ì‚¬ í›„ì— ì¼€ì´í¬ë¥¼ ë¨¹ì„ ìˆ˜ ìˆë‹¤.",
    passive:"The cakes can be eaten after lunch by the students.",
    active:"The students can eat the cakes after lunch."
  },
  {
    ko:"ëª¨ë“  ì‚¬ëŒì€ ê·¸ ê·œì¹™ì„ ì§€ì¼œì•¼ í•œë‹¤.",
    passive:"The rule must be followed by everyone.",
    active:"Everyone must follow the rule."
  },
  {
    ko:"ëˆ„êµ°ê°€ëŠ” ì§€ê¸ˆ ë¬¸ì„ ë‹«ì•„ì•¼ í•œë‹¤.",
    passive:"The door must be closed now by someone.",
    active:"Someone must close the door now."
  },
  {
    ko:"ê·¸ ì¼ì€ ì¼ê¾¼ë“¤ì— ì˜í•´ ê³§ ëë‚  ê²ƒì´ë‹¤.",
    passive:"The work will be finished soon by the workers.",
    active:"The workers will finish the work soon."
  },
  {
    ko:"ê²½ë¹„ì›ë“¤ì€ ê°€ë°©ë“¤ì„ ë‹¤ì‹œ ê²€ì‚¬í•  ê²ƒì´ë‹¤.",
    passive:"The bags will be checked again by the guards.",
    active:"The guards will check the bags again."
  },
  {
    ko:"ìš°ë¦¬ëŠ” ê·¸ í”„ë¡œì íŠ¸ë¥¼ ì´ë²ˆ ì£¼ì— ëë‚´ì•¼ í•œë‹¤.",
    passive:"The project should be done this week by us.",
    active:"We should do the project this week."
  },
  {
    ko:"ë„ˆëŠ” ê·¸ ì´ì•¼ê¸°ë¥¼ ì£¼ì˜ ê¹Šê²Œ ì½ì–´ì•¼ í•œë‹¤.",
    passive:"The story should be read carefully by you.",
    active:"You should read the story carefully."
  },
  {
    ko:"ì—„ë§ˆëŠ” ë‚´ì¼ ê·¸ ì…”ì¸ ë“¤ì„ ì„¸íƒí• ì§€ë„ ëª¨ë¥¸ë‹¤.",
    passive:"The shirts may be washed tomorrow by Mom.",
    active:"Mom may wash the shirts tomorrow."
  },
  {
    ko:"ê·¸ë“¤ì€ 10ì‹œì— ë¶ˆì„ ëŒì§€ë„ ëª¨ë¥¸ë‹¤.",
    passive:"The lights may be turned off at 10 by them.",
    active:"They may turn off the lights at 10."
  }
];

const koText = document.getElementById("koText");
const passiveText = document.getElementById("passiveText");
const answerInput = document.getElementById("answerInput");
const checkBtn = document.getElementById("checkBtn");
const showAnswerBtn = document.getElementById("showAnswerBtn");
const nextBtn = document.getElementById("nextBtn");
const feedback = document.getElementById("feedback");
const currentNum = document.getElementById("currentNum");
const totalNum = document.getElementById("totalNum");
const quizArea = document.getElementById("quizArea");
const doneArea = document.getElementById("doneArea");

let idx = 0;
let isCorrect = false;
let answerTimeoutId = null;

totalNum.textContent = questions.length;

function normalize(text){
  return text
    .trim()
    .replace(/[.?!]$/,"")   // ëì˜ ë§ˆì¹¨í‘œ, ? ! ì œê±°
    .replace(/\s+/g," ")
    .toLowerCase();
}

function loadQuestion(n){
  const q = questions[n];
  idx = n;
  isCorrect = false;

  currentNum.textContent = n+1;
  koText.textContent = q.ko;
  passiveText.textContent = q.passive;
  answerInput.value = "";
  answerInput.focus();
  feedback.textContent = "";
  feedback.className = "feedback";
  nextBtn.disabled = true;

  // ì •ë‹µ ë³´ê¸° íƒ€ì´ë¨¸ ì´ˆê¸°í™”
  if (answerTimeoutId !== null) {
    clearTimeout(answerTimeoutId);
    answerTimeoutId = null;
  }
}

function checkAnswer(){
  const q = questions[idx];
  const user = normalize(answerInput.value);
  const correct = normalize(q.active);

  if(!user){
    feedback.textContent = "ë¨¼ì € ëŠ¥ë™íƒœ ë¬¸ì¥ì„ ì¨ ë³´ì„¸ìš”!";
    feedback.className = "feedback no";
    return;
  }

  if(user === correct){
    feedback.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
    feedback.className = "feedback ok";
    nextBtn.disabled = false;
    isCorrect = true;
  }else{
    feedback.textContent = "ì•„ì‰½ë„¤ìš”. í•œ ë²ˆ ë” ê³ ì³ ë³¼ê¹Œìš”?";
    feedback.className = "feedback no";
    nextBtn.disabled = true;
    isCorrect = false;
  }
}

// ì •ë‹µ í™•ì¸ ë²„íŠ¼
checkBtn.onclick = checkAnswer;

// Enter í‚¤: ì •ë‹µ ì „ì´ë©´ ì²´í¬, ì •ë‹µ í›„ë©´ ë‹¤ìŒìœ¼ë¡œ
answerInput.addEventListener("keydown", e=>{
  if(e.key === "Enter"){
    e.preventDefault();
    if(!isCorrect){
      checkAnswer();
    }else{
      goNext();
    }
  }
});

// ì •ë‹µ ë³´ê¸° ë²„íŠ¼ (3ì´ˆ ë™ì•ˆë§Œ í‘œì‹œ, ì •ë‹µ ì²˜ë¦¬ X)
showAnswerBtn.onclick = () => {
  const q = questions[idx];

  // ì´ì „ íƒ€ì´ë¨¸ ìˆìœ¼ë©´ ì·¨ì†Œ
  if (answerTimeoutId !== null) {
    clearTimeout(answerTimeoutId);
    answerTimeoutId = null;
  }

  feedback.textContent = `ì •ë‹µ: ${q.active}`;
  feedback.className = "feedback ok";

  // ì •ë‹µì„ ë³´ë”ë¼ë„ ìŠ¤ìŠ¤ë¡œ ì…ë ¥í•´ì•¼ í•˜ë¯€ë¡œ ì…ë ¥ì¹¸ì€ ë¹„ì›Œ ë‘ê¸°
  answerInput.value = "";
  nextBtn.disabled = true;
  isCorrect = false;

  // 3ì´ˆ ë’¤ ì •ë‹µ í‘œì‹œ ìë™ ìˆ¨ê¹€ (ì•„ì§ ì •ë‹µì„ ë§íˆì§€ ì•Šì€ ê²½ìš°ì—ë§Œ)
  answerTimeoutId = setTimeout(() => {
    if (!isCorrect) {
      feedback.textContent = "";
      feedback.className = "feedback";
    }
    answerTimeoutId = null;
  }, 3000);
};

function goNext(){
  if(!isCorrect) return;
  const next = idx + 1;
  if(next < questions.length){
    loadQuestion(next);
  }else{
    quizArea.style.display = "none";
    doneArea.style.display = "block";
  }
}

// ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼
nextBtn.onclick = goNext;

// ì²« ë¬¸ì œ ë¡œë“œ
loadQuestion(0);
</script>
</body>
</html>
