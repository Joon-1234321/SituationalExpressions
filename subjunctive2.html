<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ê°€ì •ë²• ê³¼ê±°(í•™ìƒìš©) - 20ë¬¸í•­ ë‹¨ì–´ì¹©(6ê°œ)</title>
<style>
  :root{
    --bg1:#dbeafe; --bg2:#ccfbf1;
    --card:#ffffffcc; --card2:#ffffffb8;
    --text:#0f172a; --muted:#475569;
    --accent:#2563eb; --warn:#f59e0b;
    --ok:#22c55e; --no:#ef4444;
    --chip:#e2e8f0; --chipH:#cbd5e1;
    --shadow:0 14px 34px rgba(2,6,23,.12);
    --r:22px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;
    background:linear-gradient(135deg,var(--bg1),var(--bg2));
    color:var(--text);
    padding:18px;
    font-size:2.025rem; /* 1.5ë°° ì²´ê° */
  }
  header{
    max-width:1040px;margin:0 auto 12px auto;
    display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;
  }
  h1{margin:0;font-size:1.6rem}
  .sub{color:var(--muted);font-weight:800;font-size:0.95em}
  .card{
    max-width:1040px;margin:0 auto;
    background:var(--card);
    border:1px solid rgba(255,255,255,.6);
    border-radius:var(--r);
    box-shadow:var(--shadow);
    padding:14px;
    backdrop-filter: blur(10px);
  }
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .pill{
    background:rgba(15,23,42,.06);
    border:1px solid rgba(15,23,42,.08);
    padding:8px 10px;border-radius:999px;
    font-weight:900;color:var(--muted);font-size:1em;
  }
  .btn{
    border:0; cursor:pointer;
    padding:12px 14px;border-radius:18px;
    background:var(--accent); color:white;
    font-weight:950; box-shadow:var(--shadow);
  }
  .btn.ghost{background:var(--chip); color:var(--text); border:1px solid rgba(2,6,23,.10)}
  .btn.warn{background:var(--warn)}
  .btn.bad{background:var(--no)}
  .btn:disabled{opacity:.55;cursor:not-allowed}
  .hr{height:1px;background:rgba(2,6,23,.08);margin:12px 0}
  .box{
    background:var(--card2);
    border:1px solid rgba(2,6,23,.10);
    border-radius:18px;
    padding:12px;
  }
  .en{font-weight:1000; line-height:1.25}
  .ko{color:var(--muted);font-weight:800;font-size:0.95em;margin-top:6px;line-height:1.25}
  .pattern{
    font-weight:1000;
    color:#1e3a8a;
    background:rgba(37,99,235,.10);
    border:1px solid rgba(37,99,235,.16);
    padding:10px 12px;border-radius:18px;
    font-size:0.95em;
    line-height:1.25;
  }
  .blankLine{
    display:flex; gap:12px; flex-wrap:wrap; align-items:center;
    font-weight:1000;
    margin-top:12px;
    line-height:1.25;
  }
  .slot{
    min-width:130px;
    padding:12px 14px;
    border-radius:18px;
    border:2px dashed rgba(37,99,235,.35);
    background:rgba(255,255,255,.78);
    text-align:center;
    user-select:none;
  }
  .slot.filled{
    border-style:solid;
    background:rgba(37,99,235,.08);
  }
  .chips{display:flex; gap:12px; flex-wrap:wrap; margin-top:14px;}
  .chip{
    padding:12px 16px;
    border-radius:999px;
    background:var(--chip);
    cursor:pointer;
    font-weight:1000;
    user-select:none;
    border:1px solid rgba(2,6,23,.10);
  }
  .chip:hover{background:var(--chipH)}
  .chip.used{opacity:.45; text-decoration:line-through; cursor:not-allowed}
  .feedback{
    margin-top:14px;
    padding:12px 14px;
    border-radius:18px;
    font-weight:950;
    background:rgba(255,255,255,.7);
    border:1px solid rgba(2,6,23,.10);
    line-height:1.25;
  }
  .feedback.ok{background:rgba(34,197,94,.15); border-color:rgba(34,197,94,.25)}
  .feedback.no{background:rgba(239,68,68,.15); border-color:rgba(239,68,68,.25)}
  .btn, .chip, .slot{ font-size:1.1em; }
  .center{display:flex;justify-content:center;align-items:center;text-align:center}
</style>
</head>
<body>

<header>
  <div>
    <h1>ê°€ì •ë²• ê³¼ê±° Â· ë‹¨ì–´ì¹© ë¹ˆì¹¸ ì±„ìš°ê¸° (í•™ìƒìš© 20ë¬¸í•­)</h1>
    <div class="sub">If + ê³¼ê±° / couldÂ·wouldÂ·might + ë™ì‚¬ì›í˜• Â· (ì„ íƒì§€ 6ê°œ)</div>
  </div>
  <div class="row">
    <span class="pill">ë¬¸í•­ <b id="idx">1</b> / <b id="total">20</b></span>
    <span class="pill">ì •ë‹µ <b id="score">0</b></span>
    <span class="pill">ì‹œë„ <b id="tries">0</b></span>
  </div>
</header>

<main class="card" id="screen">
  <div class="pattern">
    âœ… ê³µì‹: <b>If + ê³¼ê±°</b>, <b>would / could / might + ë™ì‚¬ì›í˜•</b><br>
    â­ beë™ì‚¬: ê°€ì •ë²•ì—ì„œëŠ” ë³´í†µ <b>were</b> (I/he/she/it í¬í•¨)
  </div>

  <div class="hr"></div>

  <div class="box">
    <div class="en" id="ind1"></div>
    <div class="en" id="ind2"></div>
    <div class="ko" id="indKo"></div>
  </div>

  <div class="hr"></div>

  <div class="box">
    <div class="blankLine" id="ifLine"></div>
    <div class="chips" id="chips"></div>

    <div class="row" style="margin-top:12px">
      <button class="btn ghost" id="undo">ë˜ëŒë¦¬ê¸°</button>
      <button class="btn ghost" id="clear">ì§€ìš°ê¸°</button>
      <button class="btn" id="check">ì •ë‹µ í™•ì¸</button>
      <button class="btn warn" id="next" disabled>ë‹¤ìŒ</button>
      <button class="btn bad" id="restart">ì²˜ìŒë¶€í„°</button>
    </div>

    <div class="feedback" id="fb">ë‹¨ì–´ì¹©(6ê°œ)ì„ ìˆœì„œëŒ€ë¡œ í´ë¦­í•´ ë¹ˆì¹¸ì„ ì±„ìš°ì„¸ìš”.</div>
  </div>
</main>

<script>
/* -----------------------------
   20ë¬¸í•­ / ê° ë¬¸í•­ ì¹© 6ê°œ(ì •ë‹µ3 + ì—¬ë¶„3)
------------------------------ */
const ITEMS = [
  { //1
    i1:"I don't have a car.", i2:"I can't drive to school.",
    ko:"(í˜„ì‹¤) ì°¨ê°€ ì—†ì–´ì„œ í•™êµê¹Œì§€ ìš´ì „í•  ìˆ˜ ì—†ë‹¤.",
    parts:["If I ",0," a car, I ",1," ",2," to school."],
    ans:["had","could","drive"],
    chips:["had","have","could","can","drive","drove"]
  },
  { //2
    i1:"She doesn't live near here.", i2:"She can't visit us often.",
    ko:"(í˜„ì‹¤) ë©€ë¦¬ ì‚´ì•„ì„œ ìì£¼ ë°©ë¬¸í•  ìˆ˜ ì—†ë‹¤.",
    parts:["If she ",0," near here, she ",1," ",2," us often."],
    ans:["lived","could","visit"],
    chips:["lived","live","could","would","visit","visited"]
  },
  { //3
    i1:"We don't know the answer.", i2:"We can't explain it.",
    ko:"(í˜„ì‹¤) ë‹µì„ ëª°ë¼ì„œ ì„¤ëª…í•  ìˆ˜ ì—†ë‹¤.",
    parts:["If we ",0," the answer, we ",1," ",2," it."],
    ans:["knew","could","explain"],
    chips:["knew","know","could","can","explain","explained"]
  },
  { //4
    i1:"He doesn't study.", i2:"He doesn't get good grades.",
    ko:"(í˜„ì‹¤) ê³µë¶€ë¥¼ ì•ˆ í•´ì„œ ì„±ì ì´ ì¢‹ì§€ ì•Šë‹¤.",
    parts:["If he ",0,", he ",1," ",2," good grades."],
    ans:["studied","would","get"],
    chips:["studied","study","would","could","get","got"]
  },
  { //5
    i1:"I don't speak English well.", i2:"I can't join the debate club.",
    ko:"(í˜„ì‹¤) ì˜ì–´ë¥¼ ì˜ ëª»í•´ì„œ í† ë¡  ë™ì•„ë¦¬ì— ì°¸ì—¬í•˜ê¸° ì–´ë µë‹¤.",
    parts:["If I ",0," English well, I ",1," ",2," the debate club."],
    ans:["spoke","could","join"],
    chips:["spoke","speak","could","would","join","joined"]
  },
  { //6
    i1:"They don't have a map.", i2:"They can't find the place.",
    ko:"(í˜„ì‹¤) ì§€ë„ê°€ ì—†ì–´ì„œ ê·¸ê³³ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤.",
    parts:["If they ",0," a map, they ",1," ",2," the place."],
    ans:["had","could","find"],
    chips:["had","have","could","can","find","found"]
  },
  { //7
    i1:"I don't have your email.", i2:"I can't send you the file.",
    ko:"(í˜„ì‹¤) ì´ë©”ì¼ì´ ì—†ì–´ì„œ íŒŒì¼ì„ ë³´ë‚¼ ìˆ˜ ì—†ë‹¤.",
    parts:["If I ",0," your email, I ",1," ",2," you the file."],
    ans:["had","could","send"],
    chips:["had","have","could","would","send","sent"]
  },
  { //8
    i1:"We don't have enough money.", i2:"We can't travel this winter.",
    ko:"(í˜„ì‹¤) ëˆì´ ë¶€ì¡±í•´ì„œ ì´ë²ˆ ê²¨ìš¸ì— ì—¬í–‰ì„ ëª» ê°„ë‹¤.",
    parts:["If we ",0," enough money, we ",1," ",2," this winter."],
    ans:["had","could","travel"],
    chips:["had","have","could","would","travel","traveled"]
  },
  { //9
    i1:"He doesn't know her name.", i2:"He can't say hello.",
    ko:"(í˜„ì‹¤) ì´ë¦„ì„ ëª°ë¼ì„œ ì¸ì‚¬ë¥¼ ëª» í•œë‹¤.",
    parts:["If he ",0," her name, he ",1," ",2," hello."],
    ans:["knew","could","say"],
    chips:["knew","know","could","can","say","said"]
  },
  { //10  âœ… would play -> could play
    i1:"I don't practice enough.", i2:"I don't play the piano well.",
    ko:"(í˜„ì‹¤) ì—°ìŠµì„ ì¶©ë¶„íˆ ì•ˆ í•´ì„œ í”¼ì•„ë…¸ë¥¼ ì˜ ëª» ì¹œë‹¤.",
    parts:["If I ",0," enough, I ",1," ",2," the piano well."],
    ans:["practiced","could","play"],
    chips:["practiced","practice","could","would","play","played"]
  },

  /* be / were */
  { //11
    i1:"I'm not tall.", i2:"I can't reach the top shelf.",
    ko:"(í˜„ì‹¤) í‚¤ê°€ í¬ì§€ ì•Šì•„ì„œ ìœ„ ì„ ë°˜ì— ì†ì´ ì•ˆ ë‹¿ëŠ”ë‹¤.",
    parts:["If I ",0," tall, I ",1," ",2," the top shelf."],
    ans:["were","could","reach"],
    chips:["were","was","could","can","reach","reached"]
  },
  { //12
    i1:"She isn't free today.", i2:"She can't meet us.",
    ko:"(í˜„ì‹¤) ì˜¤ëŠ˜ ì‹œê°„ì´ ì—†ì–´ì„œ ìš°ë¦¬ë¥¼ ë§Œë‚  ìˆ˜ ì—†ë‹¤.",
    parts:["If she ",0," free today, she ",1," ",2," us."],
    ans:["were","could","meet"],
    chips:["were","was","could","would","meet","met"]
  },
  { //13
    i1:"He isn't my neighbor.", i2:"I don't see him every day.",
    ko:"(í˜„ì‹¤) ì´ì›ƒì´ ì•„ë‹ˆë¼ ë§¤ì¼ ë³´ì§€ ì•ŠëŠ”ë‹¤.",
    parts:["If he ",0," my neighbor, I ",1," ",2," him every day."],
    ans:["were","would","see"],
    chips:["were","was","would","could","see","saw"]
  },
  { //14
    i1:"We aren't in the same class.", i2:"We don't work together.",
    ko:"(í˜„ì‹¤) ê°™ì€ ë°˜ì´ ì•„ë‹ˆë¼ ê°™ì´ í™œë™í•˜ì§€ ì•ŠëŠ”ë‹¤.",
    parts:["If we ",0," in the same class, we ",1," ",2," together."],
    ans:["were","would","work"],
    chips:["were","was","would","could","work","worked"]
  },
  { //15
    i1:"They aren't careful.", i2:"They make many mistakes.",
    ko:"(í˜„ì‹¤) ì¡°ì‹¬í•˜ì§€ ì•Šì•„ì„œ ì‹¤ìˆ˜ë¥¼ ë§ì´ í•œë‹¤.",
    parts:["If they ",0," careful, they ",1," ",2," fewer mistakes."],
    ans:["were","would","make"],
    chips:["were","was","would","could","make","made"]
  },

  /* might */
  { //16
    i1:"I don't sleep early.", i2:"I feel tired in the morning.",
    ko:"(í˜„ì‹¤) ì¼ì° ìì§€ ì•Šì•„ì„œ ì•„ì¹¨ì— í”¼ê³¤í•˜ë‹¤.",
    parts:["If I ",0," early, I ",1," ",2," better in the morning."],
    ans:["slept","might","feel"],
    chips:["slept","sleep","might","would","feel","felt"]
  },
  { //17
    i1:"He doesn't bring an umbrella.", i2:"He gets wet on rainy days.",
    ko:"(í˜„ì‹¤) ìš°ì‚°ì„ ì•ˆ ê°€ì ¸ì™€ì„œ ë¹„ ì˜¤ëŠ” ë‚  ì –ëŠ”ë‹¤.",
    parts:["If he ",0," an umbrella, he ",1," ",2," dry on rainy days."],
    ans:["brought","would","stay"],
    chips:["brought","bring","would","could","stay","stayed"]
  },
  { //18  âœ… would catch -> could catch
    i1:"We don't leave now.", i2:"We miss the bus.",
    ko:"(í˜„ì‹¤) ì§€ê¸ˆ ì¶œë°œí•˜ì§€ ì•Šì•„ì„œ ë²„ìŠ¤ë¥¼ ë†“ì¹œë‹¤.",
    parts:["If we ",0," now, we ",1," ",2," the bus."],
    ans:["left","could","catch"],
    chips:["left","leave","could","would","catch","caught"]
  },
  { //19
    i1:"I don't have a dictionary.", i2:"I can't check new words quickly.",
    ko:"(í˜„ì‹¤) ì‚¬ì „ì´ ì—†ì–´ì„œ ìƒˆ ë‹¨ì–´ë¥¼ ë¹¨ë¦¬ í™•ì¸ ëª» í•œë‹¤.",
    parts:["If I ",0," a dictionary, I ",1," ",2," new words quickly."],
    ans:["had","could","check"],
    chips:["had","have","could","can","check","checked"]
  },
  { //20
    i1:"She isn't confident.", i2:"She doesn't speak up in class.",
    ko:"(í˜„ì‹¤) ìì‹ ê°ì´ ì—†ì–´ì„œ ìˆ˜ì—…ì—ì„œ ë§í•˜ì§€ ì•ŠëŠ”ë‹¤.",
    parts:["If she ",0," confident, she ",1," ",2," up in class."],
    ans:["were","would","speak"],
    chips:["were","was","would","could","speak","spoke"]
  }
];

/* -----------------------------
   ENGINE
------------------------------ */
const ind1El = document.getElementById("ind1");
const ind2El = document.getElementById("ind2");
const indKoEl = document.getElementById("indKo");
const ifLineEl = document.getElementById("ifLine");
const chipsEl  = document.getElementById("chips");
const fbEl     = document.getElementById("fb");
const idxEl    = document.getElementById("idx");
const totalEl  = document.getElementById("total");
const scoreEl  = document.getElementById("score");
const triesEl  = document.getElementById("tries");
const nextBtn  = document.getElementById("next");

let order = [];
let qIndex = 0;
let filled = [];
let history = [];
let score = 0;
let tries = 0;

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}
function setFeedback(msg, kind=""){
  fbEl.className = "feedback";
  fbEl.textContent = msg;
  if(kind==="ok") fbEl.classList.add("ok");
  if(kind==="no") fbEl.classList.add("no");
}
function rebuildOrder(){
  order = shuffle([...Array(ITEMS.length)].map((_,i)=>i));
  qIndex = 0;
  score = 0;
  tries = 0;
  scoreEl.textContent = "0";
  triesEl.textContent = "0";
}
function currentItem(){
  return ITEMS[order[qIndex]];
}
function render(){
  totalEl.textContent = String(ITEMS.length);
  idxEl.textContent = String(qIndex+1);

  const q = currentItem();
  ind1El.textContent = q.i1;
  ind2El.textContent = q.i2;
  indKoEl.textContent = q.ko;

  filled = Array(q.ans.length).fill("");
  history = [];
  nextBtn.disabled = true;
  setFeedback("ë‹¨ì–´ì¹©(6ê°œ)ì„ ìˆœì„œëŒ€ë¡œ í´ë¦­í•´ ë¹ˆì¹¸ì„ ì±„ìš°ì„¸ìš”.");

  ifLineEl.innerHTML = "";
  q.parts.forEach(p=>{
    if(typeof p==="string"){
      const span = document.createElement("span");
      span.textContent = p;
      ifLineEl.appendChild(span);
    }else{
      const slot = document.createElement("span");
      slot.className = "slot";
      slot.textContent = "______";
      ifLineEl.appendChild(slot);
    }
  });

  chipsEl.innerHTML = "";
  const list = shuffle(q.chips);
  list.forEach(word=>{
    const chip = document.createElement("span");
    chip.className = "chip";
    chip.textContent = word;
    chip.addEventListener("click", ()=> place(word, chip));
    chipsEl.appendChild(chip);
  });
}

function nextEmptySlot(){ return filled.indexOf(""); }

function place(word, chipEl){
  if(chipEl.classList.contains("used")) return;

  const slotIndex = nextEmptySlot();
  if(slotIndex < 0){
    setFeedback("ë¹ˆì¹¸ì´ ë‹¤ ì°¼ì–´ìš”. â€˜ì •ë‹µ í™•ì¸â€™ì„ ëˆ„ë¥´ì„¸ìš”!");
    return;
  }

  filled[slotIndex] = word;
  chipEl.classList.add("used");
  history.push({slotIndex, chipEl});

  const slots = ifLineEl.querySelectorAll(".slot");
  slots[slotIndex].textContent = word;
  slots[slotIndex].classList.add("filled");

  nextBtn.disabled = true;
}

document.getElementById("check").addEventListener("click", ()=>{
  const q = currentItem();
  tries++;
  triesEl.textContent = String(tries);

  if(filled.some(v=>!v)){
    setFeedback("ë¹ˆì¹¸ì„ ëª¨ë‘ ì±„ìš°ì„¸ìš”.", "no");
    nextBtn.disabled = true;
    return;
  }
  const ok = q.ans.every((v,i)=>filled[i]===v);
  if(ok){
    score++;
    scoreEl.textContent = String(score);
    setFeedback("ì •ë‹µì…ë‹ˆë‹¤! âœ… ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ì„¸ìš”.", "ok");
    nextBtn.disabled = false;
  }else{
    setFeedback("í‹€ë ¸ìŠµë‹ˆë‹¤. âŒ â€˜ë˜ëŒë¦¬ê¸°/ì§€ìš°ê¸°â€™ë¡œ ë‹¤ì‹œ ë„ì „!", "no");
    nextBtn.disabled = true;
  }
});

document.getElementById("undo").addEventListener("click", ()=>{
  if(history.length===0){
    setFeedback("ë˜ëŒë¦´ ê²Œ ì—†ì–´ìš”.");
    return;
  }
  const last = history.pop();
  const {slotIndex, chipEl} = last;

  filled[slotIndex] = "";
  const slots = ifLineEl.querySelectorAll(".slot");
  slots[slotIndex].textContent = "______";
  slots[slotIndex].classList.remove("filled");

  chipEl.classList.remove("used");
  nextBtn.disabled = true;
  setFeedback("ë˜ëŒë ¸ì–´ìš”. ê³„ì† ì±„ì›Œë³´ì„¸ìš”.");
});

document.getElementById("clear").addEventListener("click", ()=>{
  render();
});

nextBtn.addEventListener("click", ()=>{
  if(qIndex < ITEMS.length-1){
    qIndex++;
    render();
  }else{
    const screen = document.getElementById("screen");
    screen.innerHTML = `
      <div class="center" style="flex-direction:column;gap:12px">
        <div class="pattern" style="max-width:900px">
          ğŸ‰ ì™„ë£Œ!<br>
          ì •ë‹µ: <b>${score}</b> / ${ITEMS.length} Â· ì‹œë„: <b>${tries}</b><br>
          ë‹¤ì‹œ í•˜ë ¤ë©´ ì•„ë˜ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.
        </div>
        <div class="row">
          <button class="btn" id="again">ë‹¤ì‹œ í’€ê¸°(ë¬¸í•­ ëœë¤)</button>
        </div>
      </div>
    `;
    document.getElementById("again").onclick = ()=> location.reload();
  }
});

document.getElementById("restart").addEventListener("click", ()=>{
  if(confirm("ì²˜ìŒë¶€í„° ë‹¤ì‹œ í• ê¹Œìš”? (ë¬¸í•­ì´ ë‹¤ì‹œ ì„ì—¬ìš”)")){
    rebuildOrder();
    render();
  }
});

window.addEventListener("keydown", (e)=>{
  if(e.key==="Enter"){
    e.preventDefault();
    document.getElementById("check").click();
  }
});

/* INIT */
rebuildOrder();
render();
</script>
</body>
</html>

