<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ë‹¨ì–´ë§¤ì¹­ê²Œì„ (ì„¸íŠ¸ A, B)</title>
<style>
  body{
    font-family: Arial, sans-serif;
    background: linear-gradient(to bottom,#e0f7ff,#f8fcff);
    margin:0; padding:24px;
    display:flex; flex-direction:column; align-items:center;
  }
  h1{color:#0369a1; margin:0 0 10px}
  .toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:center;margin-bottom:10px}
  select,button{
    padding:8px 12px;border-radius:8px;border:1px solid #ccc;font-weight:bold;cursor:pointer;
  }
  button.primary{background:#0ea5e9;color:#fff;border:none}
  .stats{color:#0c4a6e;font-weight:700;margin-left:6px}
  #game{
    display:grid;gap:12px;margin-top:14px;
    grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
    width:min(100%,960px);
  }
  .card{
    padding:14px;text-align:center;font-weight:800;border-radius:12px;
    cursor:pointer;transition:transform .15s ease,filter .2s ease,background .2s ease;
  }
  .card:hover{transform:scale(1.05)}
  .card.word{background:#bae6fd}   /* ë‹¨ì–´ = ì—°íŒŒë‘ */
  .card.meaning{background:#bbf7d0}/* ëœ»   = ì—°ë…¹ìƒ‰ */
  .card.dim{filter:brightness(0.9)}
  .card.hidden{visibility:hidden}
</style>
</head>
<body>
  <h1>ë‹¨ì–´ë§¤ì¹­ê²Œì„</h1>
  <div class="toolbar">
    <label for="setSel">ì„¸íŠ¸ ì„ íƒ:</label>
    <select id="setSel">
      <option value="SET_A">ì„¸íŠ¸ A Â· 14ê°œ (mistake~bravest)</option>
      <option value="SET_B">ì„¸íŠ¸ B Â· 12ê°œ (scary~friendship)</option>
    </select>
    <button id="restart" class="primary">ê²Œì„ ì‹œì‘ / ë‹¤ì‹œí•˜ê¸°</button>
    <span class="stats" id="timer">â± Time: 0.0s</span>
    <span class="stats" id="best">ğŸ† Best: --</span>
  </div>
  <div id="game"></div>

<script>
const DATASETS = {
  SET_A: [
    {word:'mistake',meaning:'ì‹¤ìˆ˜'},
    {word:'kindness',meaning:'ì¹œì ˆ'},
    {word:'clear the air',meaning:'ì˜¤í•´ë¥¼ í’€ë‹¤'},
    {word:'choice',meaning:'ì„ íƒ'},
    {word:'choose',meaning:'ì„ íƒí•˜ë‹¤'},
    {word:'perfect',meaning:'ì™„ë²½í•œ'},
    {word:'avoid',meaning:'í”¼í•˜ë‹¤'},
    {word:'take turns',meaning:'ë²ˆê°ˆì•„ í•˜ë‹¤'},
    {word:'sincere',meaning:'ì§„ì‹¬ ì–´ë¦°'},
    {word:'listen',meaning:'ë“£ë‹¤'},
    {word:'explain',meaning:'ì„¤ëª…í•˜ë‹¤'},
    {word:'confusion',meaning:'í˜¼ë€'},
    {word:'brave',meaning:'ìš©ê°í•œ'},
    {word:'bravest',meaning:'ê°€ì¥ ìš©ê°í•œ'},
  ],
  SET_B: [
    {word:'scary',meaning:'ë¬´ì„œìš´'},
    {word:'upset',meaning:'ì†ìƒí•œ'},
    {word:'misunderstanding',meaning:'ì˜¤í•´'},
    {word:'trust',meaning:'ì‹ ë¢°í•˜ë‹¤'},
    {word:'rebuild',meaning:'ì¬ê±´í•˜ë‹¤'},
    {word:'wish',meaning:'ì†Œì›, ë°”ë¼ë‹¤'},
    {word:'surprised',meaning:'ë†€ë€'},
    {word:'note',meaning:'ë©”ëª¨, ê¸°ë¡'},
    {word:'apologize',meaning:'ì‚¬ê³¼í•˜ë‹¤'},
    {word:'need',meaning:'í•„ìš”'},
    {word:'clear',meaning:'ë¶„ëª…í•œ, ì¹˜ìš°ë‹¤'},
    {word:'friendship',meaning:'ìš°ì •'},
  ],
};

const gameEl=document.getElementById('game');
const timerEl=document.getElementById('timer');
const bestEl=document.getElementById('best');
const restart=document.getElementById('restart');
const setSel=document.getElementById('setSel');

let firstCard=null,matches=0,startTime=0,timerInterval=null,currentSetKey=setSel.value;

function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}
function bestKey(){return `bestRecord_${currentSetKey}`;}
function loadBest(){const b=localStorage.getItem(bestKey());bestEl.textContent=`ğŸ† Best: ${b?b+'s':'--'}`;}
function startTimer(){startTime=Date.now();clearInterval(timerInterval);timerInterval=setInterval(()=>{const t=((Date.now()-startTime)/1000).toFixed(1);timerEl.textContent=`â± Time: ${t}s`;},100);}
function stopTimer(){clearInterval(timerInterval);}

function buildCards(dataset){
  gameEl.innerHTML=''; firstCard=null; matches=0;
  const raw=[];
  dataset.forEach(item=>{
    raw.push({text:item.word,pair:item.meaning,type:'word'});
    raw.push({text:item.meaning,pair:item.word,type:'meaning'});
  });
  shuffle(raw).forEach(p=>{
    const card=document.createElement('div');
    card.className='card '+p.type;
    card.textContent=p.text; card.dataset.pair=p.pair;
    card.addEventListener('click',()=>onSelect(card));
    gameEl.appendChild(card);
  });
}
function onSelect(card){
  if(card.classList.contains('hidden'))return;
  if(!firstCard){firstCard=card;card.classList.add('dim');return;}
  if(firstCard===card)return;
  if(firstCard.dataset.pair===card.textContent){
    firstCard.classList.add('hidden'); card.classList.add('hidden');
    matches++; firstCard=null;
    if(matches===DATASETS[currentSetKey].length)endGame();
  }else{const a=firstCard;firstCard=null;setTimeout(()=>{a.classList.remove('dim');card.classList.remove('dim');},300);}
}
function endGame(){
  stopTimer();
  const time=((Date.now()-startTime)/1000).toFixed(1);
  setTimeout(()=>{
    alert(`ğŸ‰ Clear! ê¸°ë¡: ${time}s`);
    const prev=localStorage.getItem(bestKey());
    if(!prev||parseFloat(time)<parseFloat(prev)){localStorage.setItem(bestKey(),time);}
    loadBest(); startGame();
  },20);
}
function startGame(){buildCards(DATASETS[currentSetKey]);loadBest();startTimer();}

restart.addEventListener('click',startGame);
setSel.addEventListener('change',()=>{currentSetKey=setSel.value;startGame();});
startGame();
</script>
</body>
</html>
